---
phase: 01-select-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - client/src/components/ui/switch.tsx
  - client/src/components/ui/collapsible.tsx
  - client/src/components/quote/QuoteHeader.tsx
  - client/src/components/quote/CoverageDetails.tsx

autonomous: true

must_haves:
  truths:
    - "Quote page displays provider name and logo"
    - "Quote page shows premium price prominently"
    - "Quote page displays coverage details (sum insured, room rent, co-payment)"
  artifacts:
    - path: "client/src/components/ui/switch.tsx"
      provides: "Toggle switch UI component"
      min_lines: 20
    - path: "client/src/components/ui/collapsible.tsx"
      provides: "Collapsible section UI component"
      min_lines: 20
    - path: "client/src/components/quote/QuoteHeader.tsx"
      provides: "Provider info and premium display"
      min_lines: 40
    - path: "client/src/components/quote/CoverageDetails.tsx"
      provides: "Coverage info grid component"
      min_lines: 50
  key_links:
    - from: "client/src/components/quote/QuoteHeader.tsx"
      to: "SelectProvider type"
      via: "provider prop"
      pattern: "provider\\?\\."
    - from: "client/src/components/quote/CoverageDetails.tsx"
      to: "SelectItem tags"
      via: "item.tags GENERAL_INFO parsing"
      pattern: "GENERAL_INFO|COVERAGE_AMOUNT"
---

<objective>
Install shadcn/ui components (Switch, Collapsible) and create QuoteHeader and CoverageDetails components for the quote display page.

Purpose: Establish the foundational UI components needed for the quote page before wiring them together.
Output: Switch and Collapsible UI components installed, QuoteHeader and CoverageDetails components ready for use.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-select-flow/CONTEXT.md
@.planning/phases/01-select-flow/01-RESEARCH.md

@client/src/components/product/HealthItemCard.tsx
@server/src/lib/select-store.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn/ui Switch and Collapsible components</name>
  <files>client/src/components/ui/switch.tsx, client/src/components/ui/collapsible.tsx</files>
  <action>
Run from the client directory:
```bash
cd client
pnpm dlx shadcn@latest add switch
pnpm dlx shadcn@latest add collapsible
```

This installs:
- Switch component (for add-on toggles in Plan 02)
- Collapsible component (for T&C section in Plan 02)
- Required Radix UI dependencies automatically

Verify files are created in `client/src/components/ui/`.
  </action>
  <verify>
Files exist:
- `client/src/components/ui/switch.tsx`
- `client/src/components/ui/collapsible.tsx`

Run `pnpm lint` from root to ensure no import errors.
  </verify>
  <done>Switch and Collapsible components installed and importable from @/components/ui/</done>
</task>

<task type="auto">
  <name>Task 2: Create QuoteHeader component</name>
  <files>client/src/components/quote/QuoteHeader.tsx</files>
  <action>
Create `client/src/components/quote/QuoteHeader.tsx` that displays:
1. Provider logo (from `provider.descriptor.images[0].url`) with fallback icon
2. Provider name (from `provider.descriptor.name`)
3. Premium price prominently displayed (big number, user decision: "Premium price prominent at top")
4. Quote validity badge if available

Component props:
```typescript
interface QuoteHeaderProps {
  provider?: {
    id: string;
    descriptor?: {
      name?: string;
      short_desc?: string;
      images?: Array<{ url: string; size_type?: string }>;
    };
  };
  quote?: {
    price: { currency: string; value: string };
    ttl?: string;
  };
}
```

Use existing formatting patterns from HealthItemCard.tsx (formatCurrency with Intl.NumberFormat).
Use Card component for container. Use Badge for validity period.
Use HeartPulse icon as fallback when no provider logo.

Style: Match existing neobrutalist card style with border-2, shadow-[4px_4px_0px_0px].
  </action>
  <verify>
- File exists at `client/src/components/quote/QuoteHeader.tsx`
- Exports `QuoteHeader` function component
- `pnpm lint` passes
  </verify>
  <done>QuoteHeader component displays provider info with prominent premium price</done>
</task>

<task type="auto">
  <name>Task 3: Create CoverageDetails component</name>
  <files>client/src/components/quote/CoverageDetails.tsx</files>
  <action>
Create `client/src/components/quote/CoverageDetails.tsx` that displays coverage information from ONDC item tags.

Component parses GENERAL_INFO tags to extract:
- COVERAGE_AMOUNT (Sum Insured) - format with L suffix for lakhs
- ROOM_RENT_CAP - format as /day
- CO_PAYMENT - display as percentage
- CASHLESS_HOSPITALS - display as X+ hospitals
- WAITING_PERIOD if present

Props:
```typescript
interface CoverageDetailsProps {
  item?: {
    tags?: Array<{
      descriptor?: { name?: string; code?: string };
      list?: Array<{
        descriptor?: { name?: string; code?: string };
        value?: string;
      }>;
    }>;
  };
}
```

Use a 2-column grid layout on desktop, 1 column on mobile.
Each coverage item shows:
- Icon (Shield for coverage, Banknote for room rent, Clock for waiting, Building2 for hospitals)
- Label
- Value (formatted appropriately)

Reuse formatHealthTagValue logic from HealthItemCard.tsx.
Use Card component for container with CardHeader and CardContent.
  </action>
  <verify>
- File exists at `client/src/components/quote/CoverageDetails.tsx`
- Exports `CoverageDetails` function component
- Handles missing tags gracefully (returns null or empty state)
- `pnpm lint` passes
  </verify>
  <done>CoverageDetails component displays coverage info in a grid layout</done>
</task>

</tasks>

<verification>
1. Both shadcn/ui components installed: `ls client/src/components/ui/switch.tsx client/src/components/ui/collapsible.tsx`
2. QuoteHeader component created: `ls client/src/components/quote/QuoteHeader.tsx`
3. CoverageDetails component created: `ls client/src/components/quote/CoverageDetails.tsx`
4. Lint passes: `pnpm lint`
5. Build passes: `pnpm build`
</verification>

<success_criteria>
- Switch.tsx and Collapsible.tsx exist in client/src/components/ui/
- QuoteHeader.tsx shows provider info with prominent premium
- CoverageDetails.tsx displays coverage info from GENERAL_INFO tags
- All files pass linting
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-select-flow/01-01-SUMMARY.md`
</output>
