import{d as m,r as o,j as e}from"./index-Ce4Z-8Mo.js";function x(){const{transactionId:c}=m.useParams(),[r,d]=o.useState(null),[u,a]=o.useState("Connecting..."),[i,l]=o.useState(null);return o.useEffect(()=>{const t=new EventSource(`/api/ondc/search-stream/${c}`);return t.addEventListener("connected",()=>{a("Connected, waiting for results...")}),t.addEventListener("initial",n=>{const s=JSON.parse(n.data);d(s),a(`Received ${s.responseCount} responses`)}),t.addEventListener("update",n=>{const s=JSON.parse(n.data);d(s),a(`Received ${s.responseCount} responses`)}),t.addEventListener("complete",n=>{const s=JSON.parse(n.data);a(`Complete - ${s.responseCount} total responses`),t.close()}),t.addEventListener("error",n=>{if(n instanceof MessageEvent){const s=JSON.parse(n.data);l(s.message)}else l("Connection error");t.close()}),()=>{t.close()}},[c]),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Live Search Results"}),e.jsxs("p",{className:"text-muted-foreground mb-2",children:["Transaction: ",c]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-8",children:["Status: ",u]}),i&&e.jsx("p",{className:"text-destructive mb-4",children:i}),r?.found?e.jsxs("div",{children:[e.jsxs("p",{className:"mb-4",children:["Found ",r.responseCount," responses from"," ",r.providers?.length||0," providers"]}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-auto",children:JSON.stringify(r,null,2)})]}):e.jsx("p",{className:"text-muted-foreground",children:"Waiting for results..."})]})})}export{x as component};
